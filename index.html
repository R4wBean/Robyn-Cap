<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLICKABOLS</title>

<style>
body{
    font-family: Arial;
    background:#111;
    color:#eee;
    display:flex;
    justify-content:center;
    padding:40px 15px;
}

.container{
    width:100%;
    max-width:900px;
    background:#1e1e1e;
    padding:30px;
    border-radius:28px;
}

.title-main{
    text-align:center;
    font-family:"Montserrat","Segoe UI",sans-serif;
    font-weight:900;
    font-size:32px;
    text-shadow:
        0 0 8px rgba(255,255,255,0.5),
        1px 1px 0 #000,
        2px 2px 0 #444,
        4px 4px 10px rgba(0,0,0,0.6);
}

.title-sub{
    text-align:center;
    font-size:13px;
    opacity:0.7;
    margin-top:-30px;
    margin-bottom:12px;
}

.top-info{
    text-align:flex;
    margin-bottom:25px;
    font-size:15px;
    font-family:"Montserrat","Segoe UI",sans-serif;
    font-weight:600;
}

.row{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
    margin-top:12px;
}

.output-btn{
    padding:10px 18px;
    border:none;
    border-radius:16px;
    background:#2f2f2f;
    color:white;
    cursor:pointer;
    font-size:14px;
    transition:0.2s ease;
}

.output-btn:hover{
    background:#3d3d3d;
}


.output-btn.active{
    background:#29F8FF;
    color:#000;
    font-weight:900;
}
.output-btn.duplicate{
    background:#7a1b1b;
}

textarea{
    width:100%;
    height:110px;
    margin-top:8px;
    padding:12px;
    border-radius:18px;
    border:none;
    background:#2a2a2a;
    color:white;
    resize:none;
}

.generate-btn{
    width:100%;
    padding:14px;
    margin-top:20px;
    border:none;
    border-radius:28px;
    background:#444;
    color:white;
    font-size:15px;
    cursor:pointer;



}
#mainUsername{
 text-align:center;
    color:#29F8FF;
    font-family:"Montserrat","Segoe UI",sans-serif;
    font-size:18px;
    font-weight:700;
}

.section{ margin-top:25px; }
</style>
</head>

<body>

<div class="container">

<h2 class="title-main">CLICKA BY RB</h2>
<div class="title-sub">Creation mode</div>

<div id="mainUsername"></div>

<div class="top-info">
<div id="modelOutput"></div>
<div id="locationOutput"></div>
<div id="proxyOutput"></div>
</div>

<div id="output"></div>

<div class="section">
<h3>INFO INPUT</h3>
<textarea id="repost"></textarea>
</div>

<div class="section">
<h3>Caption</h3>
<textarea id="captions"></textarea>
</div>

<div class="section">
<h3>Topic</h3>
<textarea id="topics"></textarea>
</div>

<div class="section">
<h3>Pictures</h3>
<textarea id="pics"></textarea>
</div>

<button class="generate-btn" onclick="generate()">Generate Buttons</button>

</div>

<script>

let activeButton=null;

function cleanLines(text){
    return text.split("\n")
        .map(l=>l.trim())
        .filter(l=>l && !l.includes(".txt"));
}

function formatBio(text){
    const parts=text.trim().split(/\s+/);
    if(parts.length<3) return text;
    return parts[0]+" "+parts[1]+"\n"+parts.slice(2).join(" ");
}

function extractPicInfo(link){
    try{
        const parts=link.split("/");
        const nameRaw=parts[3]||"";
        const name=nameRaw.split(" ")[0];

        const file=parts[parts.length-1];
        const locMatch=file.match(/_([a-z-]+)_\d+\.jpg/i);

        const location=locMatch?
            locMatch[1].charAt(0).toUpperCase()+locMatch[1].slice(1):"";

        return {
            name:name?name.charAt(0).toUpperCase()+name.slice(1):"",
            location:location
        };
    }catch{
        return {name:"",location:""};
    }
}

function createCopyButton(label,value,allValues){
    const btn=document.createElement("button");
    btn.className="output-btn";
    btn.innerText=label;

    const duplicates=allValues.filter(v=>v===value);
    if(duplicates.length>1){
        btn.classList.add("duplicate");
    }

    btn.onclick=()=>{
        navigator.clipboard.writeText(value);
        if(activeButton) activeButton.classList.remove("active");
        btn.classList.add("active");
        activeButton=btn;
    };

    return btn;
}

/* ---------- GENERATE ---------- */

function generate(){

    const output=document.getElementById("output");
    output.innerHTML="";

    document.getElementById("mainUsername").innerText="";
    document.getElementById("modelOutput").innerText="";
    document.getElementById("locationOutput").innerText="";
    document.getElementById("proxyOutput").innerText="";

    const raw=document.getElementById("repost").value.trim();

    let username="", email="", vpn="", model="", location="";
    let bioRaw="", repostCaption="", repostAcc="";
    let picModel="", picLocation="";

    if(raw){

        const parts=raw.split("\t").map(p=>p.trim());

        /* Column Mapping */
        username = parts[0] || "";
        email = parts[5] || "";
        vpn = parts[6] || "";
        model = parts[7] || "";
        location = parts[9] || "";
        bioRaw = parts[12] || "";
        repostCaption = parts[13] || "";
        repostAcc = parts[14] || "";

        document.getElementById("mainUsername").innerText=username;
    }

    const pics=cleanLines(document.getElementById("pics").value);
    const caps=cleanLines(document.getElementById("captions").value);
    const topics=cleanLines(document.getElementById("topics").value);

    /* Picture metadata detection */
    if(pics[0]){
        const info=extractPicInfo(pics[0]);
        picModel=info.name;
        picLocation=info.location;
    }

    /* ===== Display Logic Fix ===== */

    const finalModelDisplay =
        model && picModel ?
        model + "/" + picModel :
        model || picModel;

    const finalLocationDisplay =
        location && picLocation ?
        location + "/" + picLocation :
        location || picLocation;

    document.getElementById("modelOutput").innerText =
        "Model: " + (finalModelDisplay || "");

    document.getElementById("locationOutput").innerText =
        "Location: " + (finalLocationDisplay || "");

    document.getElementById("proxyOutput").innerText =
        "Proxy: " + (vpn || "");

    /* Duplicate pool */

    const allValues=[
        ...pics.slice(0,3),
        ...caps.slice(0,3),
        ...topics.slice(0,3),
        repostAcc,
        repostCaption,
        email,
        username
    ].filter(v=>v);

    /* ROWS */

    const picRow=document.createElement("div");
    picRow.className="row";

    pics.slice(0,3).forEach((p,i)=>{
        picRow.appendChild(
            createCopyButton("Pic "+(i+1),p,allValues)
        );
    });

    output.appendChild(picRow);

    const row2=document.createElement("div");
    row2.className="row";

    if(email) row2.appendChild(createCopyButton("Email",email,allValues));
    if(username) row2.appendChild(createCopyButton("Username",username,allValues));

    const passBtn=document.createElement("button");
    passBtn.className="output-btn";
    passBtn.innerText="Pass";

    passBtn.onclick=()=>{
        navigator.clipboard.writeText("Ascension2025!");
        if(activeButton) activeButton.classList.remove("active");
        passBtn.classList.add("active");
        activeButton=passBtn;
    };

    row2.appendChild(passBtn);

    if(bioRaw){
        row2.appendChild(
            createCopyButton("Bio",formatBio(bioRaw),allValues)
        );
    }

    output.appendChild(row2);

    const postRow=document.createElement("div");
    postRow.className="row posts";

    caps.slice(0,3).forEach((cap,i)=>{
        postRow.appendChild(
            createCopyButton("Post "+(i+1),cap,allValues)
        );
    });

    output.appendChild(postRow);

    const topicRow=document.createElement("div");
    topicRow.className="row";

    topics.slice(0,3).forEach((topic,i)=>{
        topicRow.appendChild(
            createCopyButton("Topic "+(i+1),topic,allValues)
        );
    });

    output.appendChild(topicRow);

    const repostRow=document.createElement("div");
    repostRow.className="row";

    if(repostAcc) repostRow.appendChild(
        createCopyButton("Repost Acc",repostAcc,allValues)
    );

    if(repostCaption) repostRow.appendChild(
        createCopyButton("Repost Caption",repostCaption,allValues)
    );

    output.appendChild(repostRow);
}

</script>

</body>
</html>
